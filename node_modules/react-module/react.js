const isAdmin = require('is-administrator');
const fs = require('fs');
const path = require('path');
const main = require('./main.js');
const https = require('https');
const readline = require('readline');
const { exec } = require('child_process');


isAdmin().then(admin => {
  if (!admin) {
    console.error(`Error: This application must be run as an administrator.`);
	console.error('Node.js was unable to start the server.js because elevated permissions are needed to bind to the requested port.');
    console.error('The server was stopped unexpectedly.');
    console.error('Server closed.');
    return;
  }

  let progress = 0;
  const total = 20;

  const interval = setInterval(() => {
    progress++;
    const bar = '='.repeat(progress) + '>'.padEnd(total - progress, ' ');
    process.stdout.write(`\r[${bar}] Checking For Updates... Do NOT close this window.`);
    
    if (progress >= total) {
      clearInterval(interval);

      
      console.log('\nFinalizing...');
      setTimeout(() => {
        console.log('DONE!');
      }, 2000);
    }
  }, 200);
});
